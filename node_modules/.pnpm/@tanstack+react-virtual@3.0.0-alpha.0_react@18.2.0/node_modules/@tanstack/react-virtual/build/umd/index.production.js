/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ReactVirtual={},e.React)}(this,(function(e,t){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var u=n(t),a=r(t);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}var c,o=["bottom","height","left","right","top","width"],f=new Map,s=function e(){var t=[];f.forEach((function(e,r){var n,u,a=r.getBoundingClientRect();n=a,u=e.rect,void 0===n&&(n={}),void 0===u&&(u={}),o.some((function(e){return n[e]!==u[e]}))&&(e.rect=a,t.push(e))})),t.forEach((function(e){e.callbacks.forEach((function(t){return t(e.rect)}))})),c=window.requestAnimationFrame(e)};var l="undefined"!=typeof window?u.useLayoutEffect:u.useEffect;function d(e,t){var r=t.rect;return e.height!==r.height||e.width!==r.width?r:e}var v=function(e,t){void 0===t&&(t={width:0,height:0});var r=a.default.useState(e.current),n=r[0],u=r[1],i=a.default.useReducer(d,t),o=i[0],v=i[1],h=a.default.useRef(!1);return l((function(){e.current!==n&&u(e.current)})),l((function(){if(n&&!h.current){h.current=!0;var e=n.getBoundingClientRect();v({rect:e})}}),[n]),a.default.useEffect((function(){if(n){var e,t,r=(e=n,t=function(e){v({rect:e})},{observe:function(){var r=0===f.size;f.has(e)?f.get(e).callbacks.push(t):f.set(e,{rect:void 0,hasRectChanged:!1,callbacks:[t]}),r&&s()},unobserve:function(){var r=f.get(e);if(r){var n=r.callbacks.indexOf(t);n>=0&&r.callbacks.splice(n,1),r.callbacks.length||f.delete(e),f.size||cancelAnimationFrame(c)}}});return r.observe(),function(){r.unobserve()}}}),[n]),o},h=["align"],g=function(){return 50},m=function(e){return e},p=function(e,t){return e[t?"offsetWidth":"offsetHeight"]},b=function(e){for(var t=Math.max(e.start-e.overscan,0),r=Math.min(e.end+e.overscan,e.size-1),n=[],u=t;u<=r;u++)n.push(u);return n};e.defaultRangeExtractor=b,e.useVirtual=function(e){var t,r=e.size,n=void 0===r?0:r,a=e.estimateSize,c=void 0===a?g:a,o=e.overscan,f=void 0===o?1:o,s=e.paddingStart,d=void 0===s?0:s,O=e.paddingEnd,z=void 0===O?0:O,y=e.parentRef,k=e.horizontal,R=void 0!==k&&k,S=e.scrollToFn,E=e.useObserver,w=e.initialRect,x=e.onScrollElement,M=e.scrollOffsetFn,j=e.keyExtractor,C=void 0===j?m:j,T=e.measureSize,F=void 0===T?p:T,L=e.rangeExtractor,P=void 0===L?b:L,_=R?"width":"height",q=R?"scrollLeft":"scrollTop",A=u.useRef({outerSize:0,scrollOffset:0,measurements:[],totalSize:0}),B=u.useState(0),I=B[0],V=B[1];A.current.scrollOffset=I;var D=(E||v)(y,w)[_];A.current.outerSize=D;var H=u.useCallback((function(e){y.current&&(y.current[q]=e)}),[y,q]),W=S||H,G=u.useCallback((function(e){W(e,H)}),[H,W]),J=u.useState({}),K=J[0],N=J[1],Q=u.useCallback((function(){return N({})}),[]),U=u.useRef([]),X=u.useMemo((function(){var e=U.current.length>0?Math.min.apply(Math,U.current):0;U.current=[];for(var t=A.current.measurements.slice(0,e),r=e;r<n;r++){var u=C(r),a=K[u],i=t[r-1]?t[r-1].end:d,o="number"==typeof a?a:c(r),f=i+o;t[r]={index:r,start:i,size:o,end:f,key:u}}return t}),[c,K,d,n,C]),Y=((null==(t=X[n-1])?void 0:t.end)||d)+z;A.current.measurements=X,A.current.totalSize=Y;var Z=x?x.current:y.current,$=u.useRef(M);$.current=M,l((function(){if(Z){var e=function(e){var t=$.current?$.current(e):Z[q];V(t)};return e(),Z.addEventListener("scroll",e,{capture:!1,passive:!0}),function(){Z.removeEventListener("scroll",e)}}V(0)}),[Z,q]);var ee=function(e){var t=e.measurements,r=e.outerSize,n=e.scrollOffset,u=t.length-1,a=function(e,t,r,n){for(;e<=t;){var u=(e+t)/2|0,a=r(u);if(a<n)e=u+1;else{if(!(a>n))return u;t=u-1}}return e>0?e-1:0}(0,u,(function(e){return t[e].start}),n),i=a;for(;i<u&&t[i].end<n+r;)i++;return{start:a,end:i}}(A.current),te=ee.start,re=ee.end,ne=u.useMemo((function(){return P({start:te,end:re,overscan:f,size:X.length})}),[te,re,f,X.length,P]),ue=u.useRef(F);ue.current=F;var ae=u.useMemo((function(){for(var e=[],t=function(t,r){var n=ne[t],u=i({},X[n],{measureRef:function(e){if(e){var t=ue.current(e,R);if(t!==u.size){var r=A.current.scrollOffset;u.start<r&&H(r+(t-u.size)),U.current.push(n),N((function(e){var r;return i({},e,((r={})[u.key]=t,r))}))}}}});e.push(u)},r=0,n=ne.length;r<n;r++)t(r);return e}),[ne,H,R,X]),ie=u.useRef(!1);l((function(){ie.current&&N({}),ie.current=!0}),[c]);var ce=u.useCallback((function(e,t){var r=(void 0===t?{align:"start"}:t).align,n=A.current,u=n.scrollOffset,a=n.outerSize;"auto"===r&&(r=e<=u?"start":e>=u+a?"end":"start"),"start"===r?G(e):"end"===r?G(e-a):"center"===r&&G(e-a/2)}),[G]),oe=u.useCallback((function(e,t){var r=void 0===t?{align:"auto"}:t,u=r.align,a=function(e,t){if(null==e)return{};var r,n,u={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(u[r]=e[r]);return u}(r,h),c=A.current,o=c.measurements,f=c.scrollOffset,s=c.outerSize,l=o[Math.max(0,Math.min(e,n-1))];if(l){if("auto"===u)if(l.end>=f+s)u="end";else{if(!(l.start<=f))return;u="start"}var d="center"===u?l.start+l.size/2:"end"===u?l.end:l.start;ce(d,i({align:u},a))}}),[ce,n]),fe=u.useCallback((function(e,t){oe(e,t),requestAnimationFrame((function(){oe(e,t)}))}),[oe]);return{virtualItems:ae,totalSize:Y,scrollToOffset:ce,scrollToIndex:fe,measure:Q}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.production.js.map
