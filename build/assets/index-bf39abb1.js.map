{"version":3,"file":"index-bf39abb1.js","sources":["../../node_modules/.pnpm/@chakra-ui+layout@2.1.16_n3dxrjldmk5gnycgnw7noyo5tu/node_modules/@chakra-ui/layout/dist/chunk-IWVFML3N.mjs","../../src/entities/user/model/user.ts","../../src/entities/user/model/user-map-histories.ts","../../src/pages/user-profile/model.ts","../../src/pages/user-profile/page.tsx"],"sourcesContent":["// src/grid-item.tsx\nimport {\n  forwardRef,\n  chakra\n} from \"@chakra-ui/system\";\nimport { compact } from \"@chakra-ui/object-utils\";\nimport { mapResponsive } from \"@chakra-ui/breakpoint-utils\";\nimport { jsx } from \"react/jsx-runtime\";\nfunction spanFn(span) {\n  return mapResponsive(\n    span,\n    (value) => value === \"auto\" ? \"auto\" : `span ${value}/span ${value}`\n  );\n}\nvar GridItem = forwardRef(function GridItem2(props, ref) {\n  const {\n    area,\n    colSpan,\n    colStart,\n    colEnd,\n    rowEnd,\n    rowSpan,\n    rowStart,\n    ...rest\n  } = props;\n  const styles = compact({\n    gridArea: area,\n    gridColumn: spanFn(colSpan),\n    gridRow: spanFn(rowSpan),\n    gridColumnStart: colStart,\n    gridColumnEnd: colEnd,\n    gridRowStart: rowStart,\n    gridRowEnd: rowEnd\n  });\n  return /* @__PURE__ */ jsx(chakra.div, { ref, __css: styles, ...rest });\n});\nGridItem.displayName = \"GridItem\";\n\nexport {\n  GridItem\n};\n","import { attach, createStore } from 'effector'\n\nimport { type User, userApi } from '~src/shared/api'\n\nexport function createUser() {\n\tconst $user = createStore<User | null>(null)\n\tconst $userPending = createStore<boolean>(false)\n\n\tconst getUserFx = attach({ effect: userApi.userQuery })\n\n\t$userPending.on(getUserFx.pending, (_, pending) => pending)\n\t$user.on(getUserFx.doneData, (_, user) => user)\n\n\treturn { $user, $userPending, getUserFx }\n}\n","import { attach, createStore } from 'effector'\n\nimport { sessionModel } from '~src/entities/session'\n\nimport { userApi, type UserMapHistory } from '~src/shared/api'\n\nexport function createUserMapHistories() {\n\tconst $userMapHistories = createStore<UserMapHistory[]>([])\n\tconst $userMapHistoriesPending = createStore<boolean>(false)\n\n\tconst getUserMapHistoriesFx = attach({\n\t\teffect: userApi.userMapHistoriesQuery,\n\t\tsource: sessionModel.$session,\n\t\tmapParams: (params: void, session) => {\n\t\t\tif (!session) throw new Error('Session is not defined')\n\t\t\treturn { userId: session.id }\n\t\t},\n\t})\n\n\t$userMapHistoriesPending.on(getUserMapHistoriesFx.pending, (_, pending) => pending)\n\t$userMapHistories.on(getUserMapHistoriesFx.doneData, (_, userMapHistories) => userMapHistories)\n\n\treturn {\n\t\tgetUserMapHistoriesFx,\n\t\t$userMapHistories,\n\t\t$userMapHistoriesPending,\n\t}\n}\n","import { createEvent, sample } from 'effector'\n\nimport { createUser, createUserMapHistories } from '~src/entities/user'\n\nexport const userPublicProfilePageMounted = createEvent<{ userId: number }>()\nexport const userPublicProfilePageUnmounted = createEvent<void>()\n\nexport const $$user = createUser()\nexport const $$userMapHistories = createUserMapHistories()\n\nsample({\n\tclock: userPublicProfilePageMounted,\n\ttarget: [$$user.getUserFx, $$userMapHistories.getUserMapHistoriesFx],\n})\n","import {\n\tAvatar,\n\tBox,\n\tCard,\n\tCardBody,\n\ttype CardProps,\n\tCenter,\n\tContainer,\n\tFlex,\n\tGrid,\n\tGridItem,\n\tSpinner,\n\tStack,\n\tText,\n} from '@chakra-ui/react'\nimport { useUnit } from 'effector-react'\nimport React from 'react'\nimport { FaUserCircle } from 'react-icons/fa'\nimport { useParams } from 'react-router'\n\nimport { Header } from '~src/widgets/header'\n\nimport { DescriptionText, Development } from '~src/shared/ui'\n\nimport * as model from './model'\n\nexport function UserProfilePage() {\n\tconst [handleMount, handleUnmount] = useUnit([\n\t\tmodel.userPublicProfilePageMounted,\n\t\tmodel.userPublicProfilePageUnmounted,\n\t])\n\n\tconst params = useParams()\n\n\tReact.useEffect(() => {\n\t\tconst userId = Number(params.userId)\n\t\thandleMount({ userId })\n\n\t\treturn () => handleUnmount()\n\t}, [])\n\n\treturn (\n\t\t<Box>\n\t\t\t<Header />\n\t\t\t<Container maxW='container.xl' minH='calc(100vh - 4rem)' py='15'>\n\t\t\t\t<Flex direction={{ base: 'column-reverse', md: 'row' }} minH='inherit' gap='5'>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tw={{ base: 'full', md: '70%' }}\n\t\t\t\t\t\tminH='inherit'\n\t\t\t\t\t\tbgColor='whiteAlpha.300'\n\t\t\t\t\t\trounded='md'\n\t\t\t\t\t\tboxShadow='md'\n\t\t\t\t\t\tpx='4'\n\t\t\t\t\t\tpy='5'\n\t\t\t\t\t>\n\t\t\t\t\t\t{/* <Development minH='inherit' /> */}\n\t\t\t\t\t\t<UserMapHistories />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box maxH='lg' w={{ base: 'full', md: '30%' }}>\n\t\t\t\t\t\t<UserCard orientation='vertical' minH='lg' />\n\t\t\t\t\t</Box>\n\t\t\t\t</Flex>\n\t\t\t</Container>\n\t\t</Box>\n\t)\n}\n\ninterface UserCardProps extends CardProps {\n\torientation?: 'vertical' | 'horizontal'\n}\n\nfunction UserCard(props: UserCardProps) {\n\tconst { orientation = 'vertical' } = props\n\tconst [userInfo, userInfoPending] = useUnit([model.$$user.$user, model.$$user.$userPending])\n\n\treturn (\n\t\t<Card minH='sm' {...props}>\n\t\t\t<CardBody minH='inherit' position='relative'>\n\t\t\t\t{userInfo && (\n\t\t\t\t\t<Flex direction={orientation === 'vertical' ? 'column' : 'row'} gap='10' align='center'>\n\t\t\t\t\t\t<Avatar as={FaUserCircle} w='full' h='full' maxW='3xs' maxH='3xs' />\n\n\t\t\t\t\t\t<Flex direction='column' gap='1'>\n\t\t\t\t\t\t\t<Text fontSize='3xl' fontWeight='bold' textAlign={orientation === 'vertical' ? 'center' : 'start'}>\n\t\t\t\t\t\t\t\t{userInfo.fullName ?? 'Нету'}\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\t\ttemplateRows={orientation === 'vertical' ? 'repeat(1fr, 5)' : 'repeat(1fr, 2)'}\n\t\t\t\t\t\t\t\ttemplateColumns={orientation === 'vertical' ? '1fr' : 'repeat(1fr, 3)'}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<GridItem>\n\t\t\t\t\t\t\t\t\t<Flex flexWrap='wrap' align='center' gap='1'>\n\t\t\t\t\t\t\t\t\t\t<Text fontSize='md' fontWeight='bold'>\n\t\t\t\t\t\t\t\t\t\t\tПочта:\n\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t<Text fontSize='sm'>{userInfo.email ?? 'Нету'}</Text>\n\t\t\t\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t\t\t<GridItem>\n\t\t\t\t\t\t\t\t\t<Flex flexWrap='wrap' align='center' gap='1'>\n\t\t\t\t\t\t\t\t\t\t<Text fontSize='md' fontWeight='bold'>\n\t\t\t\t\t\t\t\t\t\t\tОтдел:\n\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t<Text fontSize='sm'>{userInfo.direction ?? 'Нету'}</Text>\n\t\t\t\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t\t\t<GridItem>\n\t\t\t\t\t\t\t\t\t<Flex flexWrap='wrap' align='center' gap='1'>\n\t\t\t\t\t\t\t\t\t\t<Text fontSize='md' fontWeight='bold'>\n\t\t\t\t\t\t\t\t\t\t\tКато:\n\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t<Text fontSize='sm'>{userInfo.crmCato ?? 'Нету'}</Text>\n\t\t\t\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t\t\t<GridItem>\n\t\t\t\t\t\t\t\t\t<Flex flexWrap='wrap' align='center' gap='1'>\n\t\t\t\t\t\t\t\t\t\t<Text fontSize='md' fontWeight='bold'>\n\t\t\t\t\t\t\t\t\t\t\tПозиция:\n\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t<Text fontSize='sm'>{userInfo.position ?? 'Нету'}</Text>\n\t\t\t\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t\t\t<GridItem>\n\t\t\t\t\t\t\t\t\t<Flex flexWrap='wrap' align='center' gap='1'>\n\t\t\t\t\t\t\t\t\t\t<Text fontSize='md' fontWeight='bold'>\n\t\t\t\t\t\t\t\t\t\t\tПодразделение:\n\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t<Text fontSize='sm'>{userInfo.subDivision ?? 'Нету'}</Text>\n\t\t\t\t\t\t\t\t\t</Flex>\n\t\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Flex>\n\t\t\t\t\t</Flex>\n\t\t\t\t)}\n\n\t\t\t\t{userInfoPending && (\n\t\t\t\t\t<Center position='absolute' top='50%' left='50%' transform='translateY(-50%) translateX(-50%)'>\n\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t</Center>\n\t\t\t\t)}\n\t\t\t</CardBody>\n\t\t</Card>\n\t)\n}\n\nfunction UserMapHistories() {\n\tconst [mapHistories, mapHistoriesPending] = useUnit([\n\t\tmodel.$$userMapHistories.$userMapHistories,\n\t\tmodel.$$userMapHistories.$userMapHistoriesPending,\n\t])\n\n\tif (mapHistoriesPending) {\n\t\treturn (\n\t\t\t<Center flexGrow='1'>\n\t\t\t\t<Spinner colorScheme='blue' />\n\t\t\t</Center>\n\t\t)\n\t}\n\n\treturn (\n\t\t<Stack>\n\t\t\t{mapHistories.map((mapHistory, index) => (\n\t\t\t\t<Card key={index} variant='elevated'>\n\t\t\t\t\t<CardBody minH='inherit' position='relative'>\n\t\t\t\t\t\t<Stack direction='row' flexWrap='wrap'>\n\t\t\t\t\t\t\t<DescriptionText title='Номер:'>{index}</DescriptionText>\n\t\t\t\t\t\t\t<DescriptionText title='Область:'>{mapHistory.regionName}</DescriptionText>\n\t\t\t\t\t\t\t<DescriptionText title='Клиент:'>{mapHistory.clientName}</DescriptionText>\n\t\t\t\t\t\t\t<DescriptionText title='Участок:'>{mapHistory.plotName}</DescriptionText>\n\t\t\t\t\t\t</Stack>\n\t\t\t\t\t</CardBody>\n\t\t\t\t</Card>\n\t\t\t))}\n\t\t</Stack>\n\t)\n}\n"],"names":["spanFn","span","mapResponsive","value","GridItem","forwardRef","props","ref","area","colSpan","colStart","colEnd","rowEnd","rowSpan","rowStart","rest","styles","compact","jsx","chakra","createUser","$user","createStore","$userPending","getUserFx","attach","userApi.userQuery","_","pending","user","createUserMapHistories","$userMapHistories","$userMapHistoriesPending","getUserMapHistoriesFx","userApi.userMapHistoriesQuery","sessionModel.$session","params","session","userMapHistories","userPublicProfilePageMounted","createEvent","userPublicProfilePageUnmounted","$$user","$$userMapHistories","sample","UserProfilePage","handleMount","handleUnmount","useUnit","model.userPublicProfilePageMounted","model.userPublicProfilePageUnmounted","useParams","React","userId","Box","Header","Container","jsxs","Flex","UserMapHistories","UserCard","orientation","userInfo","userInfoPending","model.$$user","Card","CardBody","Avatar","FaUserCircle","Text","Grid","Center","Spinner","mapHistories","mapHistoriesPending","model.$$userMapHistories","Stack","mapHistory","index","DescriptionText"],"mappings":"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"}