{"version":3,"file":"index-b0165d5e.js","sources":["../../src/pages/settings-contracts/model.ts","../../src/pages/settings-contracts/page.tsx"],"sourcesContent":["import { createEvent, sample } from 'effector'\n\nimport { $$session } from '~src/entities/session'\nimport { createUserContracts } from '~src/entities/user'\n\nimport { type Session } from '~src/shared/api'\nimport { TableFactory } from '~src/shared/ui'\n\nexport const settingsContractsPageMounted = createEvent<void>()\nexport const settingsContractsPageUnmounted = createEvent<void>()\n\nexport const $$userContracts = createUserContracts()\nexport const $$userContractsTable = TableFactory.createTable({\n\tdata: $$userContracts.$userContracts,\n\ttableGenerateCb: () => ({}),\n})\n\nsample({\n\tclock: settingsContractsPageMounted,\n\tsource: $$session.$session,\n\tfilter: (session: Session | null): session is Session => session !== null,\n\tfn: (session) => ({ userId: session.id }),\n\ttarget: $$userContracts.getUserContractsFx,\n})\n","import { useUnit } from 'effector-react'\nimport React from 'react'\n\nimport { type UserContract } from '~src/shared/api'\nimport { type Column, TableFactory, useTable } from '~src/shared/ui'\n\nimport * as model from './model'\n\nexport function SettingsContractsPage() {\n\tconst [handleMount, handleUnmount] = useUnit([\n\t\tmodel.settingsContractsPageMounted,\n\t\tmodel.settingsContractsPageUnmounted,\n\t])\n\n\tReact.useEffect(() => {\n\t\thandleMount()\n\t\treturn () => {\n\t\t\thandleUnmount()\n\t\t}\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [])\n\n\treturn (\n\t\t<>\n\t\t\t<UserContractsTable />\n\t\t</>\n\t)\n}\n\nfunction UserContractsTable() {\n\tconst [userContracts, userContractsPending] = useUnit([\n\t\tmodel.$$userContracts.$userContracts,\n\t\tmodel.$$userContracts.$userContractsPending,\n\t])\n\tconst [tableState] = useUnit([model.$$userContractsTable.$tableState])\n\n\tconst columns = React.useMemo<Column<UserContract>[]>(\n\t\t() => [\n\t\t\t{\n\t\t\t\theader: () => '',\n\t\t\t\tcell: () => '',\n\t\t\t},\n\t\t],\n\t\t[],\n\t)\n\n\tconst { getHeaders, getCells } = useTable({\n\t\tdata: userContracts,\n\t\tcolumns,\n\t\ttableState,\n\t})\n\n\treturn (\n\t\t<TableFactory.TableContainer\n\t\t\tborderColor='lightgray'\n\t\t\tborderWidth='1px'\n\t\t\tborderRadius='md'\n\t\t\tboxShadow='md'\n\t\t\toverflow='auto'\n\t\t\twhiteSpace='pre-wrap'\n\t\t\tw='full'\n\t\t\th='fit-content'\n\t\t>\n\t\t\t<TableFactory.Table\n\t\t\t\tsx={{ borderCollapse: 'collapse' }}\n\t\t\t\toverflow='hidden'\n\t\t\t\tposition='relative'\n\t\t\t\tborderStyle='hidden'\n\t\t\t>\n\t\t\t\t<TableFactory.THead>\n\t\t\t\t\t<TableFactory.Tr>\n\t\t\t\t\t\t{getHeaders().map((header, index) => (\n\t\t\t\t\t\t\t<TableFactory.Th key={index}>{header}</TableFactory.Th>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</TableFactory.Tr>\n\t\t\t\t</TableFactory.THead>\n\t\t\t\t<TableFactory.TBody\n\t\t\t\t\tcolumnLength={columns.length}\n\t\t\t\t\tempty={{ empty: userContracts.length === 0 }}\n\t\t\t\t\tloading={{ loading: userContractsPending }}\n\t\t\t\t>\n\t\t\t\t\t{getCells().map((cell, index) => (\n\t\t\t\t\t\t<TableFactory.Tr key={index}>{cell}</TableFactory.Tr>\n\t\t\t\t\t))}\n\t\t\t\t</TableFactory.TBody>\n\t\t\t</TableFactory.Table>\n\t\t</TableFactory.TableContainer>\n\t)\n}\n"],"names":["settingsContractsPageMounted","createEvent","settingsContractsPageUnmounted","$$userContracts","createUserContracts","$$userContractsTable","TableFactory","sample","$$session.$session","session","SettingsContractsPage","handleMount","handleUnmount","useUnit","model.settingsContractsPageMounted","model.settingsContractsPageUnmounted","React","jsx","Fragment","UserContractsTable","userContracts","userContractsPending","model.$$userContracts","tableState","model.$$userContractsTable","columns","getHeaders","getCells","useTable","jsxs","header","index","cell"],"mappings":"yLAQO,MAAMA,EAA+BC,EAAkB,EACjDC,EAAiCD,EAAkB,EAEnDE,EAAkBC,EAAoB,EACtCC,EAAuBC,EAAa,YAAY,CAC5D,KAAMH,EAAgB,eACtB,gBAAiB,KAAO,CAAA,EACzB,CAAC,EAEDI,EAAO,CACN,MAAOP,EACP,OAAQQ,EACR,OAASC,GAAgDA,IAAY,KACrE,GAAKA,IAAa,CAAE,OAAQA,EAAQ,EAAG,GACvC,OAAQN,EAAgB,kBACzB,CAAC,ECfM,SAASO,GAAwB,CACvC,KAAM,CAACC,EAAaC,CAAa,EAAIC,EAAQ,CAC5CC,EACAC,CAAM,CACN,EAED,OAAAC,EAAM,UAAU,KACHL,IACL,IAAM,CACEC,GAAA,GAGb,CAAE,CAAA,EAGJK,EAAAC,EAAA,CACC,SAACD,EAAAE,EAAA,CAAA,CAAmB,CACrB,CAAA,CAEF,CAEA,SAASA,GAAqB,CAC7B,KAAM,CAACC,EAAeC,CAAoB,EAAIR,EAAQ,CACrDS,EAAsB,eACtBA,EAAsB,qBAAA,CACtB,EACK,CAACC,CAAU,EAAIV,EAAQ,CAACW,EAA2B,WAAW,CAAC,EAE/DC,EAAUT,EAAM,QACrB,IAAM,CACL,CACC,OAAQ,IAAM,GACd,KAAM,IAAM,EACb,CACD,EACA,CAAC,CAAA,EAGI,CAAE,WAAAU,EAAY,SAAAC,CAAS,EAAIC,EAAS,CACzC,KAAMR,EACN,QAAAK,EACA,WAAAF,CAAA,CACA,EAGA,OAAAN,EAACX,EAAa,eAAb,CACA,YAAY,YACZ,YAAY,MACZ,aAAa,KACb,UAAU,KACV,SAAS,OACT,WAAW,WACX,EAAE,OACF,EAAE,cAEF,SAAAuB,EAACvB,EAAa,MAAb,CACA,GAAI,CAAE,eAAgB,UAAW,EACjC,SAAS,SACT,SAAS,WACT,YAAY,SAEZ,SAAA,CAACW,EAAAX,EAAa,MAAb,CACA,SAAAW,EAACX,EAAa,GAAb,CACC,WAAa,EAAA,IAAI,CAACwB,EAAQC,MACzBzB,EAAa,GAAb,CAA6B,SAARwB,GAAAC,CAAe,CACrC,CAAA,CACF,CACD,CAAA,EACAd,EAACX,EAAa,MAAb,CACA,aAAcmB,EAAQ,OACtB,MAAO,CAAE,MAAOL,EAAc,SAAW,CAAE,EAC3C,QAAS,CAAE,QAASC,CAAqB,EAExC,SAASM,EAAA,EAAE,IAAI,CAACK,EAAMD,IACrBd,EAAAX,EAAa,GAAb,CAA6B,SAAR0B,CAAA,EAAAD,CAAa,CACnC,CAAA,CACF,CAAA,CAAA,CACD,CAAA,CAAA,CAGH"}