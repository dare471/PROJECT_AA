{"version":3,"file":"index-58cd24a5.js","sources":["../../node_modules/.pnpm/@chakra-ui+icons@2.0.17_react@18.2.0/node_modules/@chakra-ui/icons/dist/chunk-724FHMNJ.mjs","../../src/pages/settings/nav-generate.ts","../../src/pages/settings/page.tsx"],"sourcesContent":["// src/ChevronUp.tsx\nimport { createIcon } from \"@chakra-ui/icon\";\nvar ChevronUpIcon = createIcon({\n  d: \"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z\",\n  displayName: \"ChevronUpIcon\"\n});\n\nexport {\n  ChevronUpIcon\n};\n","export type NavItem = {\n\tlabel: string\n\tkey: string\n\ticon?: React.ReactNode\n\tprotects?: Array<() => boolean>\n\troute?: (...args: unknown[]) => string\n\tchildren?: NavItem[]\n}\n\nexport function navItemsGenerate(items: Array<NavItem>): Array<NavItem> {\n\treturn items.filter((item) => {\n\t\tif (item.protects) {\n\t\t\tconst boolProtects = item.protects.map((protect) => protect())\n\t\t\treturn boolProtects.every((protect) => protect === true)\n\t\t}\n\n\t\treturn true\n\t})\n}\n","import { ChevronDownIcon, ChevronUpIcon } from '@chakra-ui/icons'\nimport { Box, Button, Container, Flex, Icon, Stack, Text } from '@chakra-ui/react'\nimport { useStore } from 'effector-react'\nimport React from 'react'\nimport { AiOutlineFile, AiOutlineUser } from 'react-icons/ai'\nimport { MdOutlineUnsubscribe } from 'react-icons/md'\nimport { Outlet, useLocation, useNavigate } from 'react-router'\n\nimport { Header } from '~src/widgets/header'\n\nimport { $$session } from '~src/entities/session'\n\nimport { routes } from '~src/shared/routes'\n\nimport { type NavItem, navItemsGenerate } from './nav-generate'\n\nexport function SettingsPage() {\n\tconst role = useStore($$session.$role)\n\tconst location = useLocation()\n\tconst paths = location.pathname.split('/').filter((path) => path !== '')\n\n\tconst navItems = React.useMemo<Array<NavItem>>(\n\t\t() =>\n\t\t\tnavItemsGenerate([\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Профиль',\n\t\t\t\t\tkey: 'profile',\n\t\t\t\t\ticon: <Icon as={AiOutlineUser} fontSize='xl' />,\n\t\t\t\t\troute: routes.settingsProfile,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Контракты',\n\t\t\t\t\tkey: 'contracts',\n\t\t\t\t\ticon: <Icon as={AiOutlineFile} fontSize='xl' />,\n\t\t\t\t\troute: routes.settingsContracts,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Подписки',\n\t\t\t\t\tkey: 'subscribes',\n\t\t\t\t\ticon: <Icon as={MdOutlineUnsubscribe} fontSize='xl' />,\n\t\t\t\t\tprotects: [() => role.includes(1)],\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: 'Регионы',\n\t\t\t\t\t\t\tkey: 'regions',\n\t\t\t\t\t\t\troute: routes.settingsSubscribesRegions,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: 'Клиенты',\n\t\t\t\t\t\t\tkey: 'clients',\n\t\t\t\t\t\t\troute: routes.settingsSubscribesClients,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t]),\n\t\t[role],\n\t)\n\n\tconsole.log(navItems)\n\n\treturn (\n\t\t<Box>\n\t\t\t<Header />\n\t\t\t<Container maxW='container.xl' py='20'>\n\t\t\t\t<Flex direction={{ base: 'column-reverse', md: 'row' }} minH='inherit' gap='5'>\n\t\t\t\t\t<Box p='2' maxH='lg' w={{ base: 'full', md: '25%' }}>\n\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t<Navbar paths={paths} navItems={navItems} />\n\t\t\t\t\t\t</Stack>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box w={{ base: 'full', md: '75%' }} minH='inherit'>\n\t\t\t\t\t\t<Outlet />\n\t\t\t\t\t</Box>\n\t\t\t\t</Flex>\n\t\t\t</Container>\n\t\t</Box>\n\t)\n}\n\nfunction Navbar(props: { paths: string[]; navItems: NavItem[] }) {\n\tconst { paths, navItems } = props\n\n\treturn (\n\t\t<>\n\t\t\t{navItems.map((item, index) => (\n\t\t\t\t<NavbarButton key={index} paths={paths} item={item} />\n\t\t\t))}\n\t\t</>\n\t)\n}\n\ninterface NavbarButtonProps {\n\tpaths: string[]\n\titem: NavItem\n}\n\nfunction NavbarButton(props: NavbarButtonProps) {\n\tconst { paths, item } = props\n\n\tif (item.children) {\n\t\t// eslint-disable-next-line react-hooks/rules-of-hooks\n\t\tconst [isExtend, setIsExtend] = React.useState(false)\n\t\t// eslint-disable-next-line react-hooks/rules-of-hooks\n\t\tReact.useEffect(() => {\n\t\t\tif (paths.includes(item.key)) {\n\t\t\t\tsetIsExtend(true)\n\t\t\t}\n\t\t\treturn () => setIsExtend(false)\n\t\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t}, [paths])\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Button colorScheme='blue' variant='outline' onClick={() => setIsExtend((prev) => !prev)}>\n\t\t\t\t\t<Stack w='full' direction='row' justify='space-between' align='center'>\n\t\t\t\t\t\t<Stack direction='row' align='center'>\n\t\t\t\t\t\t\t{item.icon}\n\t\t\t\t\t\t\t<Text fontSize={item.icon ? 'md' : 'md'} fontWeight={item.icon ? 'medium' : 'normal'}>\n\t\t\t\t\t\t\t\t{item.label}\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t{isExtend ? <ChevronUpIcon /> : <ChevronDownIcon />}\n\t\t\t\t\t</Stack>\n\t\t\t\t</Button>\n\t\t\t\t{isExtend && (\n\t\t\t\t\t<Stack>\n\t\t\t\t\t\t{item?.children && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{item?.children.map((item, index) => (\n\t\t\t\t\t\t\t\t\t<NavbarButton key={index} paths={paths} item={item} />\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Stack>\n\t\t\t\t)}\n\t\t\t</>\n\t\t)\n\t} else {\n\t\t// eslint-disable-next-line react-hooks/rules-of-hooks\n\t\tconst navigate = useNavigate()\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Button\n\t\t\t\t\tcolorScheme='blue'\n\t\t\t\t\tvariant='outline'\n\t\t\t\t\t_after={\n\t\t\t\t\t\tpaths[paths.length - 1] === item.key\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\tcontent: '\"\"',\n\t\t\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\t\t\twidth: '1',\n\t\t\t\t\t\t\t\t\theight: 'full',\n\t\t\t\t\t\t\t\t\tbgColor: 'blue.500',\n\t\t\t\t\t\t\t\t\trounded: 'md',\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: {}\n\t\t\t\t\t}\n\t\t\t\t\tonClick={() => (item.route ? navigate(item.route()) : null)}\n\t\t\t\t>\n\t\t\t\t\t<Stack w='full' direction='row' justify='start' align='center'>\n\t\t\t\t\t\t{item.icon}\n\t\t\t\t\t\t<Text fontSize={item.icon ? 'md' : 'md'} fontWeight={item.icon ? 'medium' : 'normal'}>\n\t\t\t\t\t\t\t{item.label}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</Stack>\n\t\t\t\t</Button>\n\t\t\t</>\n\t\t)\n\t}\n}\n"],"names":["ChevronUpIcon","createIcon","navItemsGenerate","items","item","protect","SettingsPage","role","useStore","$$session.$role","paths","useLocation","path","navItems","React","jsx","Icon","AiOutlineUser","routes","AiOutlineFile","MdOutlineUnsubscribe","Box","Header","Container","Flex","Stack","Navbar","Outlet","props","Fragment","index","NavbarButton","isExtend","setIsExtend","jsxs","Button","prev","Text","ChevronDownIcon","navigate","useNavigate"],"mappings":"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"}