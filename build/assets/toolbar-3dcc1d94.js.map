{"version":3,"file":"toolbar-3dcc1d94.js","sources":["../../node_modules/.pnpm/framer-motion@9.0.3_biqbaboplfbrettd7655fr4n2y/node_modules/framer-motion/dist/es/gestures/drag/use-drag-controls.mjs","../../node_modules/.pnpm/@chakra-ui+icons@2.0.17_react@18.2.0/node_modules/@chakra-ui/icons/dist/chunk-EU7OVBI7.mjs","../../src/pages/map/toolbar.tsx"],"sourcesContent":["import { useConstant } from '../../utils/use-constant.mjs';\n\n/**\n * Can manually trigger a drag gesture on one or more `drag`-enabled `motion` components.\n *\n * ```jsx\n * const dragControls = useDragControls()\n *\n * function startDrag(event) {\n *   dragControls.start(event, { snapToCursor: true })\n * }\n *\n * return (\n *   <>\n *     <div onPointerDown={startDrag} />\n *     <motion.div drag=\"x\" dragControls={dragControls} />\n *   </>\n * )\n * ```\n *\n * @public\n */\nclass DragControls {\n    constructor() {\n        this.componentControls = new Set();\n    }\n    /**\n     * Subscribe a component's internal `VisualElementDragControls` to the user-facing API.\n     *\n     * @internal\n     */\n    subscribe(controls) {\n        this.componentControls.add(controls);\n        return () => this.componentControls.delete(controls);\n    }\n    /**\n     * Start a drag gesture on every `motion` component that has this set of drag controls\n     * passed into it via the `dragControls` prop.\n     *\n     * ```jsx\n     * dragControls.start(e, {\n     *   snapToCursor: true\n     * })\n     * ```\n     *\n     * @param event - PointerEvent\n     * @param options - Options\n     *\n     * @public\n     */\n    start(event, options) {\n        this.componentControls.forEach((controls) => {\n            controls.start(event.nativeEvent || event, options);\n        });\n    }\n}\nconst createDragControls = () => new DragControls();\n/**\n * Usually, dragging is initiated by pressing down on a `motion` component with a `drag` prop\n * and moving it. For some use-cases, for instance clicking at an arbitrary point on a video scrubber, we\n * might want to initiate that dragging from a different component than the draggable one.\n *\n * By creating a `dragControls` using the `useDragControls` hook, we can pass this into\n * the draggable component's `dragControls` prop. It exposes a `start` method\n * that can start dragging from pointer events on other components.\n *\n * ```jsx\n * const dragControls = useDragControls()\n *\n * function startDrag(event) {\n *   dragControls.start(event, { snapToCursor: true })\n * }\n *\n * return (\n *   <>\n *     <div onPointerDown={startDrag} />\n *     <motion.div drag=\"x\" dragControls={dragControls} />\n *   </>\n * )\n * ```\n *\n * @public\n */\nfunction useDragControls() {\n    return useConstant(createDragControls);\n}\n\nexport { DragControls, useDragControls };\n","// src/DragHandle.tsx\nimport { createIcon } from \"@chakra-ui/icon\";\nvar DragHandleIcon = createIcon({\n  viewBox: \"0 0 10 10\",\n  d: \"M3,2 C2.44771525,2 2,1.55228475 2,1 C2,0.44771525 2.44771525,0 3,0 C3.55228475,0 4,0.44771525 4,1 C4,1.55228475 3.55228475,2 3,2 Z M3,6 C2.44771525,6 2,5.55228475 2,5 C2,4.44771525 2.44771525,4 3,4 C3.55228475,4 4,4.44771525 4,5 C4,5.55228475 3.55228475,6 3,6 Z M3,10 C2.44771525,10 2,9.55228475 2,9 C2,8.44771525 2.44771525,8 3,8 C3.55228475,8 4,8.44771525 4,9 C4,9.55228475 3.55228475,10 3,10 Z M7,2 C6.44771525,2 6,1.55228475 6,1 C6,0.44771525 6.44771525,0 7,0 C7.55228475,0 8,0.44771525 8,1 C8,1.55228475 7.55228475,2 7,2 Z M7,6 C6.44771525,6 6,5.55228475 6,5 C6,4.44771525 6.44771525,4 7,4 C7.55228475,4 8,4.44771525 8,5 C8,5.55228475 7.55228475,6 7,6 Z M7,10 C6.44771525,10 6,9.55228475 6,9 C6,8.44771525 6.44771525,8 7,8 C7.55228475,8 8,8.44771525 8,9 C8,9.55228475 7.55228475,10 7,10 Z\",\n  displayName: \"DragHandleIcon\"\n});\n\nexport {\n  DragHandleIcon\n};\n","import { ChevronLeftIcon, ChevronRightIcon, DragHandleIcon } from '@chakra-ui/icons'\nimport { Box, Button, Icon, Stack, StackItem } from '@chakra-ui/react'\nimport { useUnit } from 'effector-react'\nimport { motion, useDragControls } from 'framer-motion'\nimport React from 'react'\nimport { MdCalendarViewMonth, MdOutlineViewAgenda } from 'react-icons/md'\n\nimport { ClientSearchFactory } from '~src/features/client-search'\nimport { CulturesSelectFactory } from '~src/features/cultures-select'\nimport { RegionSelectFactory } from '~src/features/region-select'\n\nimport * as model from './model'\nimport { cultureColors } from './lib'\n\nexport function MapToolbar() {\n\tconst [isToolbarOpen, handleToolbarClick] = useUnit([model.$isToolbarOpen, model.toolbarToggled])\n\tconst controls = useDragControls()\n\tconst containersRef = React.useRef(null)\n\n\treturn (\n\t\t<>\n\t\t\t<Box position='absolute' top='0' right='4' width='calc(100% - 600px)' height='full' ref={containersRef} />\n\t\t\t<Box\n\t\t\t\tas={motion.div}\n\t\t\t\tdrag\n\t\t\t\tdragConstraints={containersRef}\n\t\t\t\tposition='absolute'\n\t\t\t\ttop='10px'\n\t\t\t\tright='10px'\n\t\t\t\tzIndex='dropdown'\n\t\t\t>\n\t\t\t\t<Stack position='relative' maxH='12' direction='row' align='center' bgColor='blue.500' rounded='md' p='2'>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tas={motion.div}\n\t\t\t\t\t\t{...controls}\n\t\t\t\t\t\tbgColor='transparent'\n\t\t\t\t\t\t_hover={{ bgColor: 'transparent' }}\n\t\t\t\t\t\t_active={{ bgColor: 'transparent' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icon as={DragHandleIcon} aria-label='drag' cursor='pointer' color='white' />\n\t\t\t\t\t</Button>\n\n\t\t\t\t\t{isToolbarOpen && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<StackItem>\n\t\t\t\t\t\t\t\t<RegionSelectFactory.RegionSelect\n\t\t\t\t\t\t\t\t\tmodel={model.$$regionSelect}\n\t\t\t\t\t\t\t\t\tstyles={{\n\t\t\t\t\t\t\t\t\t\tcontainer: (styles) => ({\n\t\t\t\t\t\t\t\t\t\t\t...styles,\n\t\t\t\t\t\t\t\t\t\t\tminWidth: '15rem',\n\t\t\t\t\t\t\t\t\t\t\tmaxWidth: '25rem',\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\tvalueContainer: (base) => ({\n\t\t\t\t\t\t\t\t\t\t\t...base,\n\t\t\t\t\t\t\t\t\t\t\toverflowX: 'scroll',\n\t\t\t\t\t\t\t\t\t\t\tflexWrap: 'unset',\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\tmultiValue: (base) => ({\n\t\t\t\t\t\t\t\t\t\t\t...base,\n\t\t\t\t\t\t\t\t\t\t\tflex: '1 0 auto',\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</StackItem>\n\t\t\t\t\t\t\t<StackItem>\n\t\t\t\t\t\t\t\t<CulturesSelectFactory.CulturesSelect\n\t\t\t\t\t\t\t\t\tmodel={model.$$culturesSelect}\n\t\t\t\t\t\t\t\t\tstyles={{\n\t\t\t\t\t\t\t\t\t\tcontainer: (styles) => ({\n\t\t\t\t\t\t\t\t\t\t\t...styles,\n\t\t\t\t\t\t\t\t\t\t\tminWidth: '15rem',\n\t\t\t\t\t\t\t\t\t\t\tmaxWidth: '25rem',\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\tvalueContainer: (base) => ({\n\t\t\t\t\t\t\t\t\t\t\t...base,\n\t\t\t\t\t\t\t\t\t\t\toverflowX: 'scroll',\n\t\t\t\t\t\t\t\t\t\t\tflexWrap: 'unset',\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\tmultiValue: (base) => ({\n\t\t\t\t\t\t\t\t\t\t\t...base,\n\t\t\t\t\t\t\t\t\t\t\tflex: '1 0 auto',\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\tmultiValueLabel: (styles, { data }) => {\n\t\t\t\t\t\t\t\t\t\t\tconst bgColor = cultureColors[(data as any).value].bgColor ?? 'red'\n\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t...styles,\n\t\t\t\t\t\t\t\t\t\t\t\tpaddingLeft: '1.5rem',\n\t\t\t\t\t\t\t\t\t\t\t\tpaddingTop: '.1rem',\n\t\t\t\t\t\t\t\t\t\t\t\tpaddingBottom: '.1rem',\n\t\t\t\t\t\t\t\t\t\t\t\tposition: 'relative',\n\t\t\t\t\t\t\t\t\t\t\t\t':before': {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontent: '\"\"',\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: '1rem',\n\t\t\t\t\t\t\t\t\t\t\t\t\theight: '1rem',\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: bgColor,\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderRadius: '50%',\n\t\t\t\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t\t\t\t\t\t\ttop: '50%',\n\t\t\t\t\t\t\t\t\t\t\t\t\tleft: '.3rem',\n\t\t\t\t\t\t\t\t\t\t\t\t\ttransform: 'translateY(-50%)',\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</StackItem>\n\t\t\t\t\t\t\t<StackItem>\n\t\t\t\t\t\t\t\t<ClientSearchFactory.ClientSearch model={model.$$clientSearch} />\n\t\t\t\t\t\t\t</StackItem>\n\t\t\t\t\t\t\t<StackItem>\n\t\t\t\t\t\t\t\t<ClientSeparateButton />\n\t\t\t\t\t\t\t</StackItem>\n\t\t\t\t\t\t\t<StackItem>\n\t\t\t\t\t\t\t\t<ShowAfterRegionButton />\n\t\t\t\t\t\t\t</StackItem>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t<Button isActive={isToolbarOpen} colorScheme='blue' onClick={() => handleToolbarClick()}>\n\t\t\t\t\t\t{isToolbarOpen ? <ChevronLeftIcon /> : <ChevronRightIcon />}\n\t\t\t\t\t</Button>\n\t\t\t\t</Stack>\n\t\t\t</Box>\n\t\t</>\n\t)\n}\n\nfunction ClientSeparateButton() {\n\tconst [isSeparate, clientsLand, handleSeparateToggle] = useUnit([\n\t\tmodel.$isClientsSeparate,\n\t\tmodel.$$clientsLand.$clientsLand,\n\t\tmodel.clientsSeparateToggled,\n\t])\n\n\treturn (\n\t\t<Button\n\t\t\tcolorScheme='blue'\n\t\t\tborderWidth='1px'\n\t\t\tborderColor='white'\n\t\t\tisActive={isSeparate}\n\t\t\tisDisabled={clientsLand.length === 0}\n\t\t\tonClick={() => handleSeparateToggle()}\n\t\t>\n\t\t\t<Icon as={MdOutlineViewAgenda} color='white' />\n\t\t</Button>\n\t)\n}\n\nfunction ShowAfterRegionButton() {\n\tconst [showAfterRegion, handleShowAfterRegionToggle] = useUnit([model.$showAfterRegion, model.showAfterRegionToggled])\n\n\treturn (\n\t\t<Button\n\t\t\tcolorScheme='blue'\n\t\t\tborderWidth='1px'\n\t\t\tborderColor='white'\n\t\t\tisActive={showAfterRegion === 'districts'}\n\t\t\tonClick={() => handleShowAfterRegionToggle()}\n\t\t>\n\t\t\t<Icon as={MdCalendarViewMonth} color='white' />\n\t\t</Button>\n\t)\n}\n"],"names":["DragControls","controls","event","options","createDragControls","useDragControls","useConstant","DragHandleIcon","createIcon","MapToolbar","isToolbarOpen","handleToolbarClick","useUnit","model.$isToolbarOpen","model.toolbarToggled","containersRef","React","jsxs","Fragment","jsx","Box","motion","Stack","Button","Icon","StackItem","RegionSelectFactory","model.$$regionSelect","styles","base","CulturesSelectFactory","model.$$culturesSelect","data","bgColor","cultureColors","ClientSearchFactory","model.$$clientSearch","ClientSeparateButton","ShowAfterRegionButton","ChevronLeftIcon","ChevronRightIcon","isSeparate","clientsLand","handleSeparateToggle","model.$isClientsSeparate","model.$$clientsLand","model.clientsSeparateToggled","MdOutlineViewAgenda","showAfterRegion","handleShowAfterRegionToggle","model.$showAfterRegion","model.showAfterRegionToggled","MdCalendarViewMonth"],"mappings":"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"}