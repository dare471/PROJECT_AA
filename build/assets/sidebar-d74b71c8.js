import{j as l,a as e,G as x,w as m,m as k,I as g,F as $,T as d,$ as M,R as C,E as z,aL as P}from"./index-5e5270d2.js";import{c as b}from"./chunk-QODHG6BI-419e0b25.js";import{B as n,h as B,a as v}from"./ui-beea26bf.js";import{R,$ as F,a as H,b as W,c as Y,d as j,e as Z,f as G,g as N,h as V,s as D,i as w}from"./index-416f143d.js";import{h as O,C as E}from"./index-a9355dc5.js";import{T as L,a as S,b as f,c as A,d as u,e as U}from"./client-card-10cbe840.js";import{S as r}from"./chunk-O5CRURSQ-17ac6dbe.js";import{C as y}from"./chunk-LS5YNJYH-a16c4e4a.js";import"./index-4e159d07.js";import"./chunk-JSSKUSQH-ca3267ed.js";import"./ui-5f8dfeb8.js";import"./lib-80e37f83.js";var q=b({d:"M23.555,8.729a1.505,1.505,0,0,0-1.406-.98H16.062a.5.5,0,0,1-.472-.334L13.405,1.222a1.5,1.5,0,0,0-2.81,0l-.005.016L8.41,7.415a.5.5,0,0,1-.471.334H1.85A1.5,1.5,0,0,0,.887,10.4l5.184,4.3a.5.5,0,0,1,.155.543L4.048,21.774a1.5,1.5,0,0,0,2.31,1.684l5.346-3.92a.5.5,0,0,1,.591,0l5.344,3.919a1.5,1.5,0,0,0,2.312-1.683l-2.178-6.535a.5.5,0,0,1,.155-.543l5.194-4.306A1.5,1.5,0,0,0,23.555,8.729Z",displayName:"StarIcon"}),J=b({displayName:"ArrowLeftIcon",path:l("g",{fill:"currentColor",children:[e("path",{d:"M10.416,12a2.643,2.643,0,0,1,.775-1.875L20.732.584a1.768,1.768,0,0,1,2.5,2.5l-8.739,8.739a.25.25,0,0,0,0,.354l8.739,8.739a1.768,1.768,0,0,1-2.5,2.5l-9.541-9.541A2.643,2.643,0,0,1,10.416,12Z"}),e("path",{d:"M.25,12a2.643,2.643,0,0,1,.775-1.875L10.566.584a1.768,1.768,0,0,1,2.5,2.5L4.327,11.823a.25.25,0,0,0,0,.354l8.739,8.739a1.768,1.768,0,0,1-2.5,2.5L1.025,13.875A2.643,2.643,0,0,1,.25,12Z"})]})}),K=b({displayName:"ArrowRightIcon",path:l("g",{fill:"currentColor",children:[e("path",{d:"M13.584,12a2.643,2.643,0,0,1-.775,1.875L3.268,23.416a1.768,1.768,0,0,1-2.5-2.5l8.739-8.739a.25.25,0,0,0,0-.354L.768,3.084a1.768,1.768,0,0,1,2.5-2.5l9.541,9.541A2.643,2.643,0,0,1,13.584,12Z"}),e("path",{d:"M23.75,12a2.643,2.643,0,0,1-.775,1.875l-9.541,9.541a1.768,1.768,0,0,1-2.5-2.5l8.739-8.739a.25.25,0,0,0,0-.354L10.934,3.084a1.768,1.768,0,0,1,2.5-2.5l9.541,9.541A2.643,2.643,0,0,1,23.75,12Z"})]})});function Q(i){return x({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",stroke:"#000",strokeWidth:"2",d:"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,10 L12,18 M12,6 L12,8"}}]})(i)}function X(i){return x({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"desc",attr:{},child:[]},{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M9 12v-4"}},{tag:"path",attr:{d:"M15 12v-2"}},{tag:"path",attr:{d:"M12 12v-1"}},{tag:"path",attr:{d:"M3 4h18"}},{tag:"path",attr:{d:"M4 4v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-10"}},{tag:"path",attr:{d:"M12 16v4"}},{tag:"path",attr:{d:"M9 20h6"}}]})(i)}function ue(i){const[c,o]=m([V,D]),[p,a]=m([w.$tab,w.tabChanged]);return l(k,{children:[e(n,{as:"aside",pos:{base:"absolute",md:"static"},top:{base:c?"calc(-100% - 4rem)":"0",md:"0"},left:{base:"0",md:"0"},zIndex:"sticky",w:{base:"full",md:c?"600px":"0"},h:"full",bgColor:"white",overflow:"hidden",borderColor:"blackAlpha.500",borderRightWidth:"1px",transition:"top 0.3s ease",...i,children:l(L,{index:p,onChange:a,isLazy:!0,isFitted:!0,h:"full",display:"flex",flexGrow:"1",flexDirection:"column",children:[l(S,{children:[e(f,{children:e(g,{as:B,fontSize:"xl"})}),e(f,{children:e(g,{as:X,fontSize:"xl"})}),e(f,{children:e(g,{as:Q,fontSize:"xl"})})]}),l(A,{minH:"0",children:[e(u,{h:"full",overflow:"auto",children:e(_,{})}),e(u,{h:"full",overflow:"auto",children:e(ee,{})}),e(u,{h:"full",overflow:"auto",children:e(le,{})})]})]})}),e(v,{minH:{base:"unset",md:"100%"},position:{base:"absolute",md:"unset"},size:{base:"md",md:"xs"},left:{base:"1",md:"unset"},bottom:{base:"1",md:"unset"},zIndex:"sticky",colorScheme:"blue",rounded:{base:"full",md:"none"},onClick:()=>o(),children:c?e(J,{}):e(K,{})})]})}function _(){return e($,{direction:"column",w:"full",h:"full",overflowY:"auto",children:e(R.RegionsTreeView,{model:F})})}function ee(){return l(n,{gap:"4",children:[l(n,{minH:"0",children:[e(d,{fontSize:"xl",fontWeight:"bold",children:"Аналитика по областям"}),e(n,{minH:"0",children:e(n,{overflow:"auto",h:"full",children:e(H.RegionsAnalyticsByYear,{model:W,allowToggle:!0})})})]}),l(n,{minH:"0",children:[e(d,{fontSize:"xl",fontWeight:"bold",children:"Аналитика по клиенту"}),e(n,{minH:"0",children:e(n,{overflow:"auto",h:"full",children:e(O.ClientAnalyticsByYear,{model:Y,allowToggle:!0})})})]})]})}function le(){const[i,c]=m([j.landClicked,Z.landClicked]),[o]=m([G.$circlesClients]),[p]=m([M.map(t=>t?t.favoriteClients:[])]),[a,s]=C.useState([]),I=t=>{a.includes(t)?s(a.filter(h=>h!==t)):s([...a,t])},T=()=>{P(a),s([])};return l(L,{children:[l(S,{children:[e(f,{children:"Клиент"}),e(f,{children:"Отфильтрованные клиенты"})]}),l(A,{position:"relative",h:"full",children:[e(u,{children:e(E.ClientPlots,{model:N,onPlotClick:({plotId:t})=>c(t),h:"full"})}),e(u,{children:e(n,{children:e(r,{gap:"2",my:"2",children:o.length!==0?l(k,{children:[e(n,{w:"full",position:"sticky",top:"-10px",zIndex:"1",bgColor:"blue.500",boxShadow:"md",rounded:"md",px:"4",py:"2",children:l(r,{direction:"row",color:"white",children:[e(d,{fontSize:"md",fontWeight:"medium",children:"Отфильтрованных клиентов:"}),e("b",{children:o.length})]})}),o.map((t,h)=>e(C.Fragment,{children:e(U,{client:t,onClick:()=>i(t.clientId),children:l(r,{direction:"row",justify:"space-between",align:"center",bgColor:"yellow.500",color:"white",rounded:"md",px:"4",py:"1",children:[e(d,{children:"Добавить в избранное"}),e(y,{onChange:()=>I(t.clientId),colorScheme:"whiteAlpha",isChecked:p.includes(t.clientId)||a.includes(t.clientId),isDisabled:p.includes(t.clientId)})]})})},h)),e(n,{w:"full",position:"sticky",bottom:"-10px",zIndex:"1",bgColor:"blue.500",boxShadow:"md",rounded:"md",px:"4",py:"2",children:l(r,{direction:"row",justify:"space-between",align:"center",children:[l(r,{children:[l(r,{direction:"row",color:"white",children:[e(d,{fontSize:"md",fontWeight:"medium",children:"Выбранно клиентов:"}),e(d,{children:a.length})]}),l(r,{direction:"row",color:"white",children:[e(d,{children:"Добавить всех:"}),e(y,{isChecked:a.length===o.length,onChange:t=>t.target.checked?s(o.map(h=>h.clientId)):s([]),colorScheme:"whiteAlpha"})]})]}),e(v,{size:"sm",colorScheme:"yellow",color:"white",onClick:T,children:e(q,{})})]})})]}):e(z,{children:"Пусто"})})})})]})]})}export{ue as MapSidebar};
//# sourceMappingURL=sidebar-d74b71c8.js.map
